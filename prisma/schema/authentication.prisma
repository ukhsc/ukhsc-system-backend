model FederatedAccount {
  id                  Int               @id @default(autoincrement())
  provider            FederatedProvider
  provider_identifier String /// User identifier from the provider (e.g. Google ID)
  email               String

  user_id Int
  user    User @relation(fields: [user_id], references: [id])

  @@unique([provider, provider_identifier], name: "unique_provider_identifier")
  @@unique([provider, user_id], name: "unique_provider_user")
  @@index([provider, provider_identifier])
  @@index([email])
}

enum FederatedProvider {
  Google
  GoogleWorkspace /// Google Workspace for Education
}

model LoginActivity {
  id        Int        @id @default(autoincrement())
  device_id Int
  device    UserDevice @relation(fields: [device_id], references: [id], onDelete: Cascade)

  ip_address String?
  login_time DateTime @default(now())
  success    Boolean

  @@index([login_time(sort: Desc)])
}
